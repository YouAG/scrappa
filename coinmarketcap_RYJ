
require 'open-uri'

class CryptoSearch

  def initialize
    @coin_market = Nokogiri::HTML(open("https://coinmarketcap.com/all/views/all/"))
  end 


  def get_crypto_name
    @crypto_names = @coin_market.css('a[class="currency-name-container"]').map{|id| id.text.downcase.gsub(" ","-").gsub(".","-")}
  end  


  def perform
  	get_crypto_name
  	@crypto_prices = @coin_market.css("a[class=price]").map{|crypto| crypto.text.downcase}
  	@cryptos = Hash[@crypto_names.zip(@crypto_prices)]
  end	
end  